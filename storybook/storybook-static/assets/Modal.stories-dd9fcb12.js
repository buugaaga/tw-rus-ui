import{j as e,q as X,_ as Z,t as ee,a as n,F as w}from"./usePropId-97cc893b.js";import{u as i}from"./Button-8f6129d9.js";import{b as a}from"./Card-22106150.js";import{r}from"./index-76fb7be0.js";import{i as se}from"./use-independent-context.hook-9077e291.js";import{k as re,l as te}from"./floating-ui.react.esm-6cc99f0f.js";import{r as oe}from"./use-focus-trap.hook-89e26b32.js";import{r as ne}from"./use-keypress-dd3b0736.js";import{m as le}from"./Overlay-0d528997.js";import{t as ae}from"./tw-merge-1166cefb.js";import{c as ie}from"./Text-267b81ec.js";import"./InputGroup.context-bea77a96.js";import"./Spinner-211d531f.js";import"./ChevronDown-fe8e455a.js";import"./variant.context-7223bf5a.js";import"./use-element-context.hook-714f7c36.js";import"./Image-ba5545c6.js";import"./_commonjsHelpers-de833af9.js";import"./index-d3ea75b5.js";const[ce,de]=se(),P=t=>{const{children:c}=t,[s,f]=r.useState([]),[d,u]=r.useState(null),p={registry:s,setRegistry:f,activeModalId:d};return r.useEffect(()=>{if(s.length>1){const l=s[s.length-2];if(!l)return;l.animate([{opacity:1,transform:"translateY(0%)",filter:"blur(0)",visibility:"visible"},{opacity:0,transform:"translateY(-50px)",filter:"blur(15px)",visibility:"hidden"}],{duration:100}),l.style.zIndex="40"}const h=s[s.length-1];h?(h.style.zIndex="60",u(h.id)):u(null)},[s]),e(ce,Object.assign({value:p},{children:c}))};P.displayName="ModalGroup";const ue={closeOnEscape:!0,color:"white",mode:"dialog",open:!1,overlayBlur:"sm",overlayCloseOnClick:!0,overlayColor:"dark",overlayOpacity:"50",position:"top",radius:"md",shadow:"base",size:"sm"},M=r.forwardRef((t,c)=>{const s=X("Modal"),f=Object.assign(Object.assign({},ue),t),{children:d,className:u="",closeOnEscape:p,color:h,mode:l,onClose:N,open:o,overlayBlur:q,overlayCloseOnClick:T,overlayColor:A,overlayOpacity:K,position:v,radius:B,shadow:E,size:S}=f,H=Z(f,["children","className","closeOnEscape","color","mode","onClose","open","overlayBlur","overlayCloseOnClick","overlayColor","overlayOpacity","position","radius","shadow","size"]),z=ee(t.id),y=r.useRef(null),[J,b]=r.useState(!1),L=oe(J),Q=re([y,L||null,c||null]),g=r.useRef(null),{activeModalId:F,registry:O,setRegistry:R}=de(),U=r.useMemo(()=>{if(l==="fullscreen")return"0%";switch(v){case"top":case"bottom":return"0%";default:return"-50%"}},[v,l]);r.useEffect(()=>{if(!R||!O||!y.current)return;const m=o?[...O,y.current]:O.filter(j=>j!==y.current);R(m),m.length!==0&&!o&&m.length<O.length&&(m[m.length-1].animate([{opacity:0,transform:"translateY(-50px)",visibility:"hidden"},{opacity:1,transform:"translateY(0%)",visibility:"visible"}],{duration:150}),b(!1))},[o]);const V=r.useMemo(()=>ae(s({className:u,color:h,mode:l,position:v,radius:B,shadow:E,size:S})),[u,h,l,v,B,E,S,s]);return ne("Escape",p,N),r.useEffect(()=>{const m=o?"ease-in-out":"ease-out",j=o?150:100,W=new KeyframeEffect(y.current,[{opacity:0,transform:"translateY(-100px)",visibility:"hidden"},{opacity:1,transform:`translateY(${U})`,visibility:"visible"}],{duration:j,fill:"both",easing:m});g.current=new Animation(W,document.timeline)},[o,y]),r.useEffect(()=>{g.current&&(o?(g.current.play(),g.current.onfinish=()=>{b(!0)}):(g.current.reverse(),b(!1)))},[o]),r.useEffect(()=>{g.current&&(F===z?setTimeout(()=>{b(!0)},100):b(!1))},[F]),n(w,{children:[l!=="fullscreen"&&e(le,{open:o,onClick:()=>{T&&N&&N()},blur:q,color:A,opacity:K,closeOnClick:T}),e(te,{children:e("div",Object.assign({className:"flex justify-center"},{children:e("div",Object.assign({id:z,role:"dialog","aria-modal":"true","aria-hidden":!o,style:{opacity:0,visibility:"hidden"},ref:Q,className:V},H,{children:d}))}))})]})});M.displayName="Modal";const C=Object.assign(M,{Group:P});M.__docgenInfo={description:"",methods:[],displayName:"Modal"};const pe=["auto","sm","md","lg","xl","screen"],Ye={title:"Components/Modal",component:C,argTypes:{size:{options:pe,control:{type:"radio"}},ref:{table:{disable:!0}},onClose:{table:{disable:!0}},open:{table:{disable:!0}}},parameters:{controls:{expanded:!0,sort:"alpha"}}},me=t=>{const[c,s]=r.useState(!1),[f,d]=r.useState(!1),[u,p]=r.useState(!1);return n(w,{children:[n(C.Group,{children:[e(C,{...t,open:c,onClose:()=>s(!1),children:n(a,{className:"w-full",children:[e(a.Body,{children:e("h1",{children:"This is a parent modal"})}),n(a.Footer,{className:"bg-gray-50/50 justify-end space-x-2",children:[e(i,{variant:"secondary",onClick:()=>s(!1),children:"Cancel"}),e(i,{onClick:()=>d(!0),children:"Next"})]})]})}),e(C,{...t,open:f,onClose:()=>d(!1),children:n(a,{className:"w-full",children:[e(a.Body,{children:e("h1",{children:"This is a child modal"})}),n(a.Footer,{className:"bg-gray-50/50 justify-end space-x-2",children:[e(i,{variant:"secondary",onClick:()=>d(!1),children:"Back"}),e(i,{onClick:()=>p(!0),children:"Next"})]})]})}),e(C,{...t,open:u,onClose:()=>p(!1),children:n(a,{className:"w-full",children:[e(a.Body,{children:e("h1",{children:"This is a second child modal"})}),e(a.Footer,{className:"bg-gray-50/50 justify-end space-x-2",children:e(i,{variant:"secondary",onClick:()=>p(!1),children:"Back"})})]})})]}),e(i,{onClick:()=>s(!0),children:"Open"})]})},fe=t=>e(me,{...t}),x=fe.bind({}),he=t=>{const[c,s]=r.useState(!1);return n(w,{children:[e(C,{...t,mode:"fullscreen",radius:"none",open:c,onClose:()=>s(!1),children:n("div",{className:"flex flex-col h-full space-y-2 p-2",children:[e(ie,{children:"This is a fullscreen modal"}),e(i,{onClick:()=>s(!1),size:"md",color:"gray",children:"Close"})]})}),e(i,{onClick:()=>s(!0),children:"Open"})]})},k=he.bind({});var Y,_,I;x.parameters={...x.parameters,docs:{...(Y=x.parameters)==null?void 0:Y.docs,source:{originalSource:`args => {
  return <Template {...args} />;
}`,...(I=(_=x.parameters)==null?void 0:_.docs)==null?void 0:I.source}}};var D,G,$;k.parameters={...k.parameters,docs:{...(D=k.parameters)==null?void 0:D.docs,source:{originalSource:`args => {
  const [open, setOpen] = useState(false);
  return <>
      <Modal {...args} mode="fullscreen" radius="none" open={open} onClose={() => setOpen(false)}>
        <div className="flex flex-col h-full space-y-2 p-2">
          <Text>This is a fullscreen modal</Text>

          <Button onClick={() => setOpen(false)} size="md" color="gray">
            Close
          </Button>
        </div>
      </Modal>

      <Button onClick={() => setOpen(true)}>Open</Button>
    </>;
}`,...($=(G=k.parameters)==null?void 0:G.docs)==null?void 0:$.source}}};const _e=["Default","Fullscreen"];export{x as Default,k as Fullscreen,_e as __namedExportsOrder,Ye as default};
//# sourceMappingURL=Modal.stories-dd9fcb12.js.map
